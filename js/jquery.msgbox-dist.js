!function(i,t){var o={Esc:27,Space:32,Left:37,Right:39,Up:38,Down:40,Tab:9,Enter:13},n={fixed:!0,overlay:!0,overlayEvent:"flash",id:0,open:!1,drag:window,resize:!0,title:!1,type:"html",content:!1,icons:[],buttons:[],buttonEvents:{},keyEvents:{Esc:"close",Space:"play",Left:"prev",Right:"next",Enter:"play"},prefix:"jMsgbox",width:600,height:450,initialWidth:350,initialHeight:220,top:!1,left:!1,titleHeight:30,footHeight:40,transition:"swing",speed:300,opacity:0,zIndex:99,lang:"en",minPos:"top",minWidth:200,photoAuto:!0,photoSpeed:2500,photoScaled:!1,photoFade:500,padding:0,imgError:"Failed to load image.",xhrError:"Failed to load URL.",onOpen:!1,onClose:!1,onLoad:!1,onBeforeClose:!1},e=function(t,o,n,e){return n=n||{},e=e||{},i(document.createElement(t)).addClass(o).attr(e).css(n)},s=function(){return window.innerHeight?window.innerHeight:i(window).height()},a=function(t,o){return i.msgboxI18N&&i.msgboxI18N[o]&&i.msgboxI18N[o][t]?i.msgboxI18N[o][t]:t},r=function(i,t){this.$overlay,this.$wrap,this.$controls,this.$icons={},this.$title,this.$content,this.$loaded,this.$prompt,this.$iframe,this.$foot,this.$img,this.$buttons={},this.$resize,this.$trigger=i,this.options=t,this.v,this.loaded=!1,this.minimized=!1,this.maximized=!1,this.opened=!1,this.dragData={},this.resizeData={},this.playing=!1,this.titleSpecified=!1,this.index=0,this._completeOptions(),this._assemble(),this._append(),this._bindEvents(),this.options.open&&this.open()};r.prototype={_completeOptions:function(){switch(this.options.type){case"confirm":case"prompt":null!==this.options.buttons&&0==this.options.buttons.length&&(this.options.buttons=["OK","Cancel"]),null!==this.options.icons&&0==this.options.icons.length&&(this.options.icons=["close"]),this.options.width==n.width&&this.options.height==n.height&&(this.options.width=this.options.initialWidth,this.options.height=this.options.initialHeight);break;case"alert":case"warning":case"info":case"error":case"success":null!==this.options.buttons&&0==this.options.buttons.length&&(this.options.buttons=["OK"]),null!==this.options.icons&&0==this.options.icons.length&&(this.options.icons=["close"]),this.options.width==n.width&&this.options.height==n.height&&(this.options.width=this.options.initialWidth,this.options.height=this.options.initialHeight);break;case"photo":case"image":this.$trigger&&!this.options.content&&(this.options.content=this.$trigger),null!==this.options.icons&&0==this.options.icons.length&&(this.options.icons=["close"]),this.options.resize=!1;break;case"album":case"gallery":this.$trigger&&!this.options.content&&(this.options.content=this.$trigger.selector),null!==this.options.icons&&0==this.options.icons.length&&(this.options.icons=["prev","play","next","close"]),this.options.resize=!1;break;default:null!==this.options.icons&&0==this.options.icons.length&&(this.options.icons=["max","close"])}i.inArray(this.options.type,["ajax","iframe"])>-1&&!this.options.content&&this.$trigger&&(this.options.content=this.$trigger.attr("href")),this.options.width||(this.options.width=this.options.initialWidth),this.options.height||(this.options.height=this.options.initialHeight),this.options.content||-1!=i.inArray(this.options.type,["ajax","iframe","photo","image","album","gallery"])||(this.options.content="jquery.msgbox v "+i.msgbox.version),(null===this.options.buttons||0==this.options.buttons.length)&&(this.options.footHeight=0),this.$trigger&&(this.options.id=0),this.options.title&&(this.titleSpecified=!0),this.options.photoFade===!0&&(this.options.photoFade=n.photoFade),this.options.photoFade===!1&&(this.options.photoFade=0),i.msgboxI18N=i.msgboxI18N||{},i.msgboxI18N.en=i.msgboxI18N.en||{},i.msgboxI18N.en.xhrError=i.msgboxI18N.en.xhrError||this.options.xhrError,i.msgboxI18N.en.imgError=i.msgboxI18N.en.imgError||this.options.imgError},_assemble:function(){this.$overlay=e("div",this.options.prefix+"-overlay",{position:"fixed",top:0,left:0,height:"100%",width:"100%",opacity:this.options.opacity,display:"none"});var t=this.options.top!==!1?this.options.top:(s()-this.options.initialHeight)/2-this.options.titleHeight,o=this.options.left!==!1?this.options.left:(i(window).width()-this.options.initialWidth)/2;this.$wrap=e("span",this.options.prefix+"-wrap",{display:"none",width:this.options.initialWidth,height:this.options.initialHeight,position:this.options.fixed?"fixed":"absolute",overflow:"hidden",top:this.options.fixed?t:t+i(window).scrollTop(),left:this.options.fixed?o:o+i(window).scrollLeft()}),this.$title=e("div",this.options.prefix+"-title",{position:"relative",height:this.options.titleHeight,cursor:this.options.drag?"move":"auto"}),this.options.title&&this.$title.html(this.options.title);var n={display:"inline-block"};if(this.$icons.prev=e("a",this.options.prefix+"-prev",n,{href:"javascript:;",title:a("Prev",this.options.lang)}),this.$icons.next=e("a",this.options.prefix+"-next",n,{href:"javascript:;",title:a("Next",this.options.lang)}),this.$icons.play=e("a",this.options.prefix+"-play",n,{href:"javascript:;",title:a("Play/Pause",this.options.lang)}),this.$icons.min=e("a",this.options.prefix+"-min",n,{href:"javascript:;",title:a("Minimize",this.options.lang)}),this.$icons.max=e("a",this.options.prefix+"-max",n,{href:"javascript:;",title:a("Maximize",this.options.lang)}),this.$icons.close=e("a",this.options.prefix+"-close",n,{href:"javascript:;",title:a("Close",this.options.lang)}),this.$controls=e("span",this.options.prefix+"-controls",{position:"absolute",height:"100%"}),null!==this.options.icons)for(var r=0;r<this.options.icons.length;r++)this.$controls.append(this.$icons[this.options.icons[r]]);var p={type:"button"};if(this.$buttons.OK=e("input",this.options.prefix+"-ok",{},p),this.$buttons.Cancel=e("input",this.options.prefix+"-cancel",{},p),this.$buttons.OK.val(a("OK",this.options.lang)),this.$buttons.Cancel.val(a("Cancel",this.options.lang)),this.$foot=e("div",this.options.prefix+"-foot",{position:"relative",height:this.options.footHeight,"line-height":this.options.footHeight}),null!==this.options.buttons)for(var h=0,r=0;r<this.options.buttons.length;r++)this.$buttons[this.options.buttons[r]]||(this.$buttons[this.options.buttons[r]]=e("input",this.options.prefix+"-button-"+ ++h,{},p).val(this.options.buttons[r])),this.$foot.append(this.$buttons[this.options.buttons[r]]);this.$resize=e("a",this.options.prefix+"-resize",{cursor:"se-resize",position:"absolute",bottom:"0px",right:"0px",display:"inline-block"},{href:"javascript:;"}),i.support.boxSizing||this.$resize.css({right:"5px",bottom:"5px"}),this.$content=e("div",this.options.prefix+"-content",{overflow:"hidden",position:"relative"}),this.$prompt=e("input",this.options.prefix+"-prompt-input",{},{type:"text"}),this.$loaded=e("div",this.options.prefix+"-loaded",{padding:this.options.padding,width:"100%",height:"100%",overflow:-1==i.inArray(this.options.type,["photo","image","album","gallery"])?"auto":"hidden"}),this.$loading=e("div",this.options.prefix+"-loading",{height:"100%",width:"100%"})},_append:function(){this.options.overlay&&i(document.body).append(this.$overlay),i(document.body).append(this.$wrap.append(this.$title.append(this.$controls),this.$content.append(this.$loaded))),null!==this.options.buttons&&this.options.buttons.length>0?(this.$foot.appendTo(this.$wrap),this.options.resize&&this.$resize.appendTo(this.$foot)):this.options.resize&&this.$resize.appendTo(this.$content)},_bindEvents:function(){var n=this;if(this.$trigger&&this.$trigger.bind("click."+this.options.prefix,function(i){i.preventDefault(),n.focus()}),this.enableResize(),this.enableDrag(),this.options.overlay&&this.options.overlayEvent){var e=!1;i.isFunction(this.options.overlayEvent)?e=this.options.overlayEvent:i.isFunction(this[this.options.overlayEvent])&&(e=this[this.options.overlayEvent]),e&&this.$overlay.bind("click."+this.options.prefix,function(){e.apply(n)})}switch(this.options.type){case"confirm":this.options.buttonEvents.OK||(this.options.buttonEvents.OK=function(){this.close(function(){this.v=!0})}),this.options.buttonEvents.Cancel||(this.options.buttonEvents.Cancel=function(){this.close(function(){this.v=!1})});break;case"prompt":this.options.buttonEvents.OK||(this.options.buttonEvents.OK=function(){this.close(function(){this.v=this.$prompt.val()})}),this.options.buttonEvents.Cancel||(this.options.buttonEvents.Cancel=function(){this.close(function(){this.v=t})});break;default:this.options.buttonEvents.OK||(this.options.buttonEvents.OK="close")}i.each(this.options.buttonEvents,function(t,o){i.isFunction(o)||(o=i.isFunction(n[o])?n[o]:!1),o&&n.$buttons[t].bind("click."+n.options.prefix,function(){o.apply(n)})}),i.each(this.$icons,function(i,t){var o;switch(i){case"close":o=function(i){i.stopPropagation(),n.close()},t.bind("click."+n.options.prefix,o);break;case"max":o=function(i){i.stopPropagation(),n.max()},t.unbind("click.max."+n.options.prefix).one("click.max."+n.options.prefix,o);break;case"min":o=function(i){i.stopPropagation(),n.min()},t.unbind("click.min."+n.options.prefix).one("click.min."+n.options.prefix,o);break;case"play":o=function(i){i.stopPropagation(),n.play()},t.bind("click.play."+n.options.prefix,o);break;case"prev":o=function(i){i.stopPropagation(),n.prev()},t.bind("click.prev."+n.options.prefix,o);break;case"next":o=function(i){i.stopPropagation(),n.next()},t.bind("click.next."+n.options.prefix,o)}}),this.$wrap.bind("mousedown."+n.options.prefix,function(){i(this).css("z-index",++i.msgbox._zIndex),i.msgbox._focused=n}),i.each(this.options.keyEvents,function(t,e){t=o[t]||t,t&&(i.isFunction(e)||(e=i.isFunction(n[e])?n[e]:!1),e&&i(document).bind("keydown."+n.options.prefix,function(o){o.keyCode===t&&i.msgbox._focused==n&&e.apply(n)}))})},_loadImg:function(o,n){if(o&&0!=o.length){var s=this;this.$loading=e("div",this.options.prefix+"-loading",{height:"100%",width:"100%"}).appendTo(this.$loaded),this.titleSpecified||this.title(o.attr("title"));var r=function(){if(s.$loading.remove(),s.$loading=t,s.options.photoScaled){var i=s.options.height-s.options.titleHeight-s.options.footHeight,o=s.$img.outerHeight(!0),e=s.$img.outerWidth(!0),a=1;o>i&&(a=i/o),e*a>s.options.width&&(a=s.options.width/e);var r=e*a,p=o*a;s.$img.css({position:"absolute",width:e*a+"px",height:o*a+"px"}),i>=p&&s.$img.css("top",(i-p)/2+"px"),r<=s.options.width&&s.$img.css("left",(s.options.width-r)/2+"px")}else s.options.height=s.$img.outerHeight(!0)+s.options.titleHeight+s.options.footHeight,s.options.width=s.$img.outerWidth(!0);s.$img.fadeIn(s.options.photoFade),s.loaded=!0,s.options.onLoad&&s.options.onLoad.apply(s),n&&n.apply(s)};this.$img||(this.$img=e("img",this.options.prefix+"-photo"),i.each(["alt","longdesc","aria-describedby"],function(i,t){var n=o.attr(t)||o.attr("data-"+t)||"";s.$img.attr(t,n)}),this.$img.hide().appendTo(this.$loaded).error(function(){s.$loading.remove(),s.$loading=t,s.loaded=!0,s.content(a("imgError",s.options.lang))})),this.$img.hide().unbind("load."+this.options.prefix).bind("load."+this.options.prefix,r),setTimeout(function(){s.$img.attr("src",o.attr("href"))},1)}},_load:function(o){if(!this.loaded)switch(this.options.type){case"text":this.$loaded.text(this.options.content),this.loaded=!0,o&&o.apply(this),this.options.onLoad&&this.options.onLoad.apply(this);break;case"html":var n="object"===i.type(this.options.content)?this.options.content.show():this.options.content;this.$loaded.append(n),this.loaded=!0,o&&o.apply(this),this.options.onLoad&&this.options.onLoad.apply(this);break;case"alert":case"warning":case"info":case"error":case"success":case"confirm":var n="object"===i.type(this.options.content)?this.options.content.show():this.options.content;this.$loaded.append(n).addClass(this.options.prefix+"-shortcut "+this.options.prefix+"-"+this.options.type),this.loaded=!0,o&&o.apply(this),this.options.onLoad&&this.options.onLoad.apply(this);break;case"prompt":var n="object"===i.type(this.options.content)?this.options.content.show():this.options.content;this.$loaded.append(n).append(this.$prompt).addClass(this.options.prefix+"-shortcut "+this.options.prefix+"-"+this.options.type),this.loaded=!0,o&&o.apply(this),this.options.onLoad&&this.options.onLoad.apply(this);break;case"ajax":this.$loading=e("div",this.options.prefix+"-loading",{height:"100%",width:"100%"}).appendTo(this.$content);var s=this;this.$loaded.load(this.options.content,function(i,n){s.$loading.remove(),s.$loading=t,s.$loaded.appendTo(s.$content),"error"==n&&s.$loaded.html(a("xhrError",s.options.lang)),s.loaded=!0,o&&o.apply(s),s.options.onLoad&&s.options.onLoad.apply(s)});break;case"photo":case"image":var r=i(this.options.content);this._loadImg(r,o);break;case"album":case"gallery":var p=this.$trigger?this.$trigger.index(this.options.content):0;this.index=0>p?0:p;var r=i(this.options.content).eq(this.index),s=this;this._loadImg(r,function(){s.$img.unbind("click."+s.options.prefix).bind("click."+s.options.prefix,function(){s.next()}),o&&o.apply(s)});break;case"iframe":var h=e("div",this.options.prefix+"-loading",{height:this.$content.innerHeight()+"px",width:"100%"}).appendTo(this.$content);this.options.title||(this.title(a("Loading",this.options.lang)+" ..."),this.options.title=!1);var s=this;this.$iframe=e("iframe",this.options.prefix+"-iframe",{height:"100%",width:"100%",border:"none",display:"none"},{frameborder:0,marginheight:"0px",marginwidth:"0px",scrolling:"auto",src:this.options.content}).appendTo(s.$loaded).one("load",function(){if(h.remove(),s.$iframe.show(),!s.options.title){var t="";try{t=i("title",s.$iframe.contents()).text()}catch(n){}s.title(t)}s.loaded=!0,s.options.onLoad&&s.options.onLoad.apply(s),o&&o.apply(s)})}},_restoreFromMin:function(i){if(this.minimized){var t=this;this.animate(this.minimized,function(){t.minimized=!1,t.$icons.min.removeClass(t.options.prefix+"-restore"),t.$wrap.css("position",t.options.fixed?"fixed":"absolute"),t.$icons.min.unbind("click.min."+t.options.prefix).one("click.min."+t.options.prefix,function(){t.min()}),t.enableDrag(),t.enableResize(),i&&i.apply(t)})}},_min:function(i,t){if(!this.minimized){var o={width:parseInt(this.$wrap.css("width")),height:parseInt(this.$wrap.css("height")),top:parseInt(this.$wrap.css("top")),left:parseInt(this.$wrap.css("left"))},n=this;this.animate(i,function(){n.minimized=o,n.$icons.min.addClass(n.options.prefix+"-restore"),n.$wrap.css("position","fixed"),n.$icons.min.unbind("click.restore."+n.options.prefix).one("click.restore."+n.options.prefix,function(){n.restore()}),this.$trigger||n.disableDrag(),n.disableResize(),t&&t.apply(n)})}},enableDrag:function(){if(this.options.drag!==!1){var o=this;this.$title.css("cursor","move").bind("mousedown.drag."+this.options.prefix,function(n){o.dragData.x=n.pageX,o.dragData.y=n.pageY,o.dragData.top=parseInt(o.$wrap.css("top")),o.dragData.left=parseInt(o.$wrap.css("left")),o.dragData.width=parseInt(o.$wrap.css("width")),o.dragData.height=parseInt(o.$wrap.css("height")),i(document).one("mouseup.drag."+o.options.prefix,function(t){o.dragData={},i(this).unbind(" mousemove.drag."+o.options.prefix)}).bind("mousemove.drag."+o.options.prefix,function(n){if(n.preventDefault(),!i.isEmptyObject(o.dragData)){var e=o.dragData.left+n.pageX-o.dragData.x,s=o.dragData.top+n.pageY-o.dragData.y,a=o.dragData.width,r=o.dragData.height,p=i(o.options.drag);if(p.length>0){var h=p.offset();h||(h={left:0,top:0}),o.options.fixed||(h.left+=i(window).scrollLeft(),h.top+=i(window).scrollTop());var c=h.left,l=h.top,u=h.left+p.innerWidth(),f=h.top+p.innerHeight();e=c>=e?c:e,e=e+a>u?u-a:e,s=s+r>f?f-r:s,s=l>=s?l:s}o.animate({width:a,height:r,top:s,left:e},t,0)}})})}},disableDrag:function(){this.$title.css("cursor","auto").unbind("mousedown.drag."+this.options.prefix)},enableResize:function(){if(this.options.resize!==!1){var o=this;this.$resize.show().bind("mousedown.resize."+this.options.prefix,function(n){o.resizeData.x=n.pageX,o.resizeData.y=n.pageY,o.resizeData.width=parseInt(o.$wrap.css("width")),o.resizeData.height=parseInt(o.$wrap.css("height")),o.resizeData.top=parseInt(o.$wrap.css("top")),o.resizeData.left=parseInt(o.$wrap.css("left")),i(document).bind("mouseup.resize."+o.options.prefix,function(t){o.resizeData={},i(this).unbind("mouseup.resize."+o.options.prefix+" mousemove.resize."+o.options.prefix)}).bind("mousemove.resize."+o.options.prefix,function(n){if(n.preventDefault(),!i.isEmptyObject(o.resizeData)){var e=o.resizeData.width+n.pageX-o.resizeData.x,s=o.resizeData.height+n.pageY-o.resizeData.y;e=e<o.options.resize.width?o.options.resize.width:e,s=s<o.options.resize.height?o.options.resize.height:s,o.animate({width:e,height:s,top:o.resizeData.top,left:o.resizeData.left},t,0)}})})}},disableResize:function(){this.$resize.hide().unbind("mousedown.resize."+this.options.prefix)},animate:function(o,n,e){o=o||{},o=i.extend({},{top:this.options.top,left:this.options.left,width:this.options.width,height:this.options.height,opacity:1},o),e===t&&(e=this.options.speed);var a=(s()-o.height)/2-this.options.titleHeight,r=(i(window).width()-o.width)/2;a=0>a?0:a,o.top===!1&&(o.top=this.options.fixed?a:a+i(window).scrollTop()),o.left===!1&&(o.left=this.options.fixed?r:r+i(window).scrollLeft());var p=this;this.$overlay.fadeTo(e,this.options.opacity);var h=function(){p.$content.height(p.$wrap.height()-p.options.titleHeight-p.options.footHeight)};this.$wrap.dequeue().animate(o,{duration:e,complete:function(){h(),n&&n.apply(p)},step:h,easing:this.options.transition})},flash:function(t,o,n){t=t||.3,o=o||100;var e=this;this.$title.fadeTo(0,t).delay(o).fadeTo(0,1).delay(o).fadeTo(0,t).delay(o).fadeTo(0,1).queue(function(){n&&n.apply(e),i(this).dequeue()})},play:function(i){if("album"==this.options.type||"gallery"==this.options.type){if(this.playing&&-1!=this.playing&&-2!=this.playing)return void this.pause();var t=this;this.$icons.play.removeClass(this.options.prefix+"-pause"),this.playing=setTimeout(function(){t.next(i)},t.options.photoSpeed)}},pause:function(){if(("album"==this.options.type||"gallery"==this.options.type)&&this.playing&&-1!==this.playing&&-2!==this.playing){this.playing&&(clearTimeout(this.playing),this.playing=-1);this.$icons.play.addClass(this.options.prefix+"-pause")}},next:function(t){if("album"==this.options.type||"gallery"==this.options.type){this.index++,this.index=this.index>=i(this.options.content).length?0:this.index;var o=i(this.options.content).eq(this.index),n=this;n.playing&&-1!=n.playing&&-2!=n.playing&&clearTimeout(n.playing),this._loadImg(o,function(){n.playing&&-1!=n.playing&&-2!=n.playing&&(n.playing=setTimeout(function(){n.next(t)},n.options.photoSpeed)),n.animate(),t&&t.apply(n)})}},prev:function(t,o){if("album"==this.options.type||"gallery"==this.options.type){this.index--,this.index=this.index>=i(this.options.content).length?0:this.index;var n=i(this.options.content).eq(this.index),e=this;e.playing&&-1!=e.playing&&-2!=e.playing&&clearTimeout(e.playing),this._loadImg(n,function(){e.playing&&-1!=e.playing&&-2!=e.playing&&(e.playing=setTimeout(function(){e.next(o)},e.options.photoSpeed)),e.animate(),o&&o.apply(e)})}},open:function(o){if(!this.opened){this.$overlay.show().css("z-index",++i.msgbox._zIndex),this.$wrap.show().css("z-index",i.msgbox._zIndex),this.options.titleHeight=this.$title.outerHeight(!0),this.$title.css({"line-height":this.options.titleHeight+"px"}),this.options.footHeight>0&&(this.options.footHeight=this.$foot.outerHeight(!0),this.$foot.css({"line-height":this.options.footHeight+"px"})),this.$content.height(this.$wrap.height()-this.options.titleHeight-this.options.footHeight),this.options.resize===!0&&(this.options.resize={width:this.options.minWidth,height:null!==this.options.buttons&&this.options.buttons.length>0?this.options.titleHeight+this.options.footHeight+5:this.options.titleHeight+5});var n=this,e=function(){n.opened=!0,i.msgbox._focused=n,n.options.onOpen&&n.options.onOpen.apply(n),o&&o.apply(n)},s=function(){"album"!=n.options.type&&"gallery"!=n.options.type||!n.options.photoAuto||!n.options.photoSpeed||n.playing&&-2!=n.playing||n.play()};this.loaded?this.animate(t,function(){e(),s()}):this._load(function(){n.animate(t,e),s()})}},val:function(){return this.v},close:function(t){if(this.opened&&(!this.options.onBeforeClose||this.options.onBeforeClose.apply(this)!==!1)){this.playing&&-1!=this.playing&&-2!=this.playing&&(clearTimeout(this.playing),this.playing=-2);var o=this,n=function(i){o.animate({width:o.options.initialWidth,height:o.options.initialHeight,opacity:0},function(){o.$overlay.fadeOut("fast",function(){o.opened=!1,o.$wrap.hide(),o.$overlay.hide(),i&&i.apply(o),o.options.onClose&&o.options.onClose.apply(o)})})};!this.$trigger&&this.minimized?i.msgbox._arrangeMin(this,"out",function(){n(t)}):n(t)}},remove:function(){this.$trigger&&this.$trigger.unbind("click."+this.options.prefix),this.$overlay.remove(),this.$wrap.remove()},title:function(o){if(o===t)return this.options.title;this.options.title=o;var n=this;return this.$title.contents().filter(function(){return 3==this.nodeType||!i(this).is(n.$controls)}).remove(),this.$title.prepend(o),this},reload:function(i){this.loaded=!1,"iframe"==this.options.type?this.$iframe.remove():this.$loaded&&this.$loaded.remove(),this._load(i)},focus:function(o){this.$overlay.css("z-index",++i.msgbox._zIndex),this.$wrap.css("z-index",i.msgbox._zIndex);var n=this;this.opened?this.minimized?this.restore(function(){i.msgbox._focused=n,o&&o.apply(n)}):this.flash(t,t,function(){i.msgbox._focused=n,o&&o.apply(n)}):this.open(o)},restore:function(t){if(this.minimized)this.$trigger?this._restoreFromMin(t):i.msgbox._arrangeMin(this,"out",t);else if(this.maximized){var o=this;this.animate(this.maximized,function(){o.maximized=!1,o.$icons.max.removeClass(o.options.prefix+"-restore"),o.$wrap.css("position",o.options.fixed?"fixed":"absolute"),o.$icons.max.unbind("click.max."+o.options.prefix).one("click.max."+o.options.prefix,function(){o.max()}),o.enableDrag(),o.enableResize(),t&&t.apply(o)})}},min:function(t){this.minimized?this.restore(t):this.$trigger?this._min({width:this.options.minWidth,height:this.options.titleHeight}):i.msgbox._arrangeMin(this,"in",t)},max:function(t){if(this.maximized)return void this.restore(t);var o=this,n=i.extend({},this.minized);if(this.minimized)this.minimized={top:0,left:0,width:i(window).width(),height:s()},i.msgbox._arrangeMin(this,"out",function(){o.maximized=n,o.$icons.max.addClass(o.options.prefix+"-restore"),o.$wrap.css("position","fixed"),o.$icons.max.unbind("click.restore."+o.options.prefix).one("click.restore."+o.options.prefix,function(){o.restore()}),o.disableDrag(),o.disableResize(),t&&t.apply(o)});else{var n={width:parseInt(this.$wrap.css("width")),height:parseInt(this.$wrap.css("height")),top:parseInt(this.$wrap.css("top")),left:parseInt(this.$wrap.css("left"))},o=this;this.animate({top:0,left:0,width:i(window).width(),height:s()},function(){o.maximized=n,o.$icons.max.addClass(o.options.prefix+"-restore"),o.$wrap.css("position","fixed"),o.$icons.max.unbind("click.restore."+o.options.prefix).one("click.restore."+o.options.prefix,function(){o.restore()}),o.disableDrag(),o.disableResize(),t&&t.apply(o)})}},content:function(i){return i===t?this.$loaded.html():(this.$loaded.html(i),!0)}},i.fn.msgbox=function(t){if("object"==typeof t){t=i.extend(!0,{},n,t);var o=i(this).selector;return this.each(function(){var n=i(this);n.selector=o;var e=new r(n,t);i(this).data("msgbox."+t.id,e)})}t=t||0;var e=i(this).data("msgbox."+t);return e},i.msgbox=function(o){if("object"==typeof o){var e=o.open===t?!0:o.open;o=i.extend(!0,{},n,o);var s=i(document.body).data("msgbox."+o.id);return s?s.focus():(s=new r(!1,o),i(document.body).data("msgbox."+o.id,s),e&&s.open()),s}o=o||0;var s=i(document.body).data("msgbox."+o);return s},i.extend(i.msgbox,{defaults:function(t){i.extend(n,t),i.msgbox._zIndex=n.zIndex},version:"8.0",_focused:null,_zIndex:n.zIndex,closeAll:function(t){var o=i(document.body).data(),n=i({});i.each(o,function(i,t){0===i.indexOf("msgbox.")&&t.opened&&n.queue("closeAll",function(i){t.close(i)})}),t&&n.queue("closeAll",t),n.dequeue("closeAll")},restoreAll:function(t){var o=i(document.body).data(),n=i({});i.each(o,function(i,t){0===i.indexOf("msgbox.")&&t.minimized&&n.queue("restoreAll",function(i){t.restore(i)})}),t&&n.queue("restoreAll",t),n.dequeue("restoreAll")},minAll:function(t){var o=i(document.body).data(),n=i({});i.each(o,function(i,t){0!==i.indexOf("msgbox.")||t.minimized||n.queue("minAll",function(i){t.min(i)})}),t&&n.queue("minAll",t),n.dequeue("minAll")},_arrangeMin:function(t,o,n){var e=i(document.body).data();if(e){var a=[],r=0,p=0,h=[],c=3,l=i({});if(i.each(e,function(i,o){0!==i.indexOf("msgbox.")||!o.minimized&&i!="msgbox."+t.options.id||o.options.minPos!=t.options.minPos||(a[i]=o,h.push(i),r+=o.options.minWidth+c)}),h.sort(),p=i.inArray("msgbox."+t.options.id,h),"in"==o){var u,f=1,d=0;r>i(window).width()&&(f=i(window).width()/r),u=t.options.minWidth*f,i.each(h,function(i,o){if(i==p)l.queue("min",function(i){t._min({left:d,top:"bottom"==t.options.minPos?s()-t.options.titleHeight:0,width:u,height:t.options.titleHeight},function(){d+=u+c,i()})});else{var n=a[o].options.minWidth*f;l.queue("min",function(i){a[o].animate({left:d,top:"bottom"==a[o].options.minPos?s()-a[o].options.titleHeight:0,width:n,height:a[o].options.titleHeight},function(){d+=n+c,i()},50)})}})}else{r-=t.options.minWidth;var f=1;r>i(window).width()&&(f=i(window).width()/r);var d=0;l.queue("min",function(i){t._restoreFromMin(i)}),i.each(h,function(i,o){i!=p&&l.queue("min",function(i){var n=a[o].options.minWidth*f;a[o].animate({left:d,top:"bottom"==t.options.minPos?s()-a[o].options.titleHeight:0,width:n,height:a[o].options.titleHeight},i,50),d+=n+c})})}n&&l.queue("min",n),l.dequeue("min")}}})}(jQuery,void 0);
